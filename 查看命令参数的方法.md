# 在 Cursor 中查看命令参数的方法

## 概述

当使用 `vscode.commands.getCommands()` 获取命令列表后，如何查看这些命令需要什么参数以及如何传递参数，有以下几种方法：

## 方法1: 使用 TypeScript 类型定义（推荐）

### 步骤：
1. **跳转到类型定义**
   - 在代码中，将光标放在 `executeCommand` 上
   - 按 `F12` 或 `Ctrl+Click` (Mac: `Cmd+Click`)
   - 跳转到 `vscode.d.ts` 文件查看类型定义

2. **查看命令签名**
   ```typescript
   executeCommand<T = unknown>(command: string, ...rest: any[]): Thenable<T>
   ```
   - `command`: 命令 ID（字符串）
   - `...rest`: 可变参数，根据具体命令而定

3. **使用智能提示**
   - 在输入 `vscode.commands.executeCommand(` 时
   - IDE 会自动显示参数提示
   - 对于常见命令，会有更详细的类型信息

## 方法2: 查看官方 API 文档

访问 VS Code API 参考文档：
- **网址**: https://code.visualstudio.com/api/references/vscode-api
- **搜索**: 在文档中搜索具体的命令 ID
- **示例**: 搜索 `vscode.open` 查看其参数说明

## 方法3: 查看命令注册位置

### 在扩展的 package.json 中
```json
{
  "contributes": {
    "commands": [
      {
        "command": "myExtension.myCommand",
        "title": "My Command",
        "arguments": [
          {
            "name": "uri",
            "type": "uri"
          }
        ]
      }
    ]
  }
}
```

### 在代码中搜索
- 搜索 `registerCommand` 的调用
- 查看命令处理函数的参数定义
- 例如：
  ```typescript
  vscode.commands.registerCommand('myCommand', (arg1, arg2) => {
    // arg1 和 arg2 就是命令的参数
  });
  ```

## 方法4: 运行时推断（谨慎使用）

### 使用错误信息推断
```typescript
try {
  await vscode.commands.executeCommand('commandId');
} catch (error) {
  // 错误信息通常会提示缺少什么参数
  console.log(error.message);
}
```

### 注意事项
⚠️ **警告**: 这个方法会尝试执行命令，可能会触发副作用（如打开文件、执行操作等），请谨慎使用。

## 方法5: 使用 TypeScript 泛型获得类型提示

```typescript
// 指定返回类型
const result = await vscode.commands.executeCommand<vscode.Uri[]>(
  'vscode.executeWorkspaceSymbolProvider',
  'query'
);

// 使用类型断言
const uri = vscode.Uri.parse('file:///path/to/file');
await vscode.commands.executeCommand('vscode.open', uri);
```

## 常见命令的参数示例

### 文件操作
```typescript
// 打开文件
vscode.commands.executeCommand('vscode.open', vscode.Uri.parse('file:///path/to/file'));

// 打开文件夹
vscode.commands.executeCommand('vscode.openFolder', vscode.Uri.parse('file:///path/to/folder'));
```

### 编辑器操作
```typescript
// 格式化文档
vscode.commands.executeCommand('editor.action.formatDocument');

// 执行代码操作
vscode.commands.executeCommand('vscode.executeCodeActionProvider', uri, range);
```

### 搜索操作
```typescript
// 工作区符号搜索
vscode.commands.executeCommand('vscode.executeWorkspaceSymbolProvider', 'query');
```

## 实用工具代码

参考 `command-args-viewer.ts` 文件中的实用函数：
- `getAllCommands()`: 获取所有命令列表
- `analyzeCommand()`: 分析命令是否存在以及是否需要参数
- `inferCommandArgs()`: 尝试推断命令参数（谨慎使用）

## 最佳实践

1. **优先使用类型定义**：这是最安全和准确的方法
2. **查阅官方文档**：对于不熟悉的命令，查看 API 文档
3. **查看源码**：如果命令来自某个扩展，查看该扩展的源码
4. **使用智能提示**：充分利用 IDE 的类型提示功能
5. **避免运行时推断**：除非必要，不要通过执行命令来推断参数

## 相关资源

- [VS Code API 参考](https://code.visualstudio.com/api/references/vscode-api)
- [VS Code 命令参考](https://code.visualstudio.com/api/references/commands)
- [扩展开发指南](https://code.visualstudio.com/api/get-started/your-first-extension)
